(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{237:function(e,t,a){"use strict";a.d(t,"a",(function(){return V}));a(325);var n=a(72),r=a(0),o=a.n(r),i=a(2),c=a(176),l=a(16),s=a.n(l),u=a(3),m=a(28),d=a(74),h=(a(315),a(316),(0===d.apps.length?d.initializeApp({apiKey:"AIzaSyDqpNYVKQ0Q7rYFA58DvXJww_PIoikYxio",authDomain:"mysignalclone.firebaseapp.com",projectId:"mysignalclone",storageBucket:"mysignalclone.appspot.com",messagingSenderId:"774302186442",appId:"1:774302186442:web:b893b137eee4cc2aeaed33",measurementId:"G-JSQZBBYQTZ"}):d.app()).firestore()),p=d.auth(),g=function(e){var t=e.navigation,a=Object(r.useState)(""),i=s()(a,2),c=i[0],l=i[1],d=Object(r.useState)(""),h=s()(d,2),g=h[0],E=h[1];Object(r.useEffect)((function(){return p.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);return o.a.createElement(u.a,{style:f.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.d,{source:{uri:"https://blog.mozilla.org/internetcitizen/files/2018/08/signal-logo.png"},style:{width:200,height:200}}),o.a.createElement(u.a,{style:f.inputContainer},o.a.createElement(m.e,{placeholder:"Email",autoFocus:!0,type:"email",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(m.e,{placeholder:"Password",secureTextEntry:!0,type:"password",value:g,onChangeText:function(e){return E(e)}})),o.a.createElement(m.b,{containerStyle:f.button,onPress:function(){p.signInWithEmailAndPassword(c,g).catch((function(e){return alert(e)}))},title:"Login"}),o.a.createElement(m.b,{onPress:function(){return t.navigate("Register")},containerStyle:f.button,type:"outline",title:"Register"}))},f=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},inputContainer:{width:300},button:{width:200,marginTop:10}}),E=function(e){var t=e.navigation,a=Object(r.useState)(""),i=s()(a,2),c=i[0],l=i[1],d=Object(r.useState)(""),h=s()(d,2),g=h[0],f=h[1],E=Object(r.useState)(""),b=s()(E,2),v=b[0],C=b[1],w=Object(r.useState)(""),S=s()(w,2),x=S[0],O=S[1];Object(r.useLayoutEffect)((function(){t.setOptions({headerBackTitle:"Login"})}),[t]);var k=function(){p.createUserWithEmailAndPassword(g,v).then((function(e){e.user.updateProfile({displayName:c,photoURL:x||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"})})).catch((function(e){return alert(e.message)}))};return o.a.createElement(u.a,{style:y.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(m.g,{h3:!0,style:{marginBottom:50}},"Create a Signal account"),o.a.createElement(u.a,{style:y.inputContainer},o.a.createElement(m.e,{placeholder:"Full Name",autoFocus:!0,type:"text",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(m.e,{placeholder:"Email",type:"email",value:g,onChangeText:function(e){return f(e)}}),o.a.createElement(m.e,{placeholder:"Password",type:"password",secureTextEntry:!0,value:v,onChangeText:function(e){return C(e)}}),o.a.createElement(m.e,{placeholder:"Profile Picture URL (optional)",type:"text",value:x,onChangeText:function(e){return O(e)},onSubmitEditing:k})),o.a.createElement(m.b,{containerStyle:y.button,raised:!0,onPress:k,title:"Register"}),o.a.createElement(u.a,{style:{height:10}}))},y=i.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"white"},button:{width:200,marginTop:10},inputContainer:{width:300}}),b=a(116),v=a(49),C=a(21),w=a(228),S=a(223),x=function(e){var t,a,n,i=e.id,c=e.chatName,l=e.enterChat,u=Object(r.useState)([]),d=s()(u,2),p=d[0],g=d[1];return Object(r.useEffect)((function(){return h.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return g(e.docs.map((function(e){return e.data()})))}))}),[]),o.a.createElement(m.f,{key:i,onPress:function(){return l(i,c)},key:i,bottomDivider:!0},o.a.createElement(m.a,{rounded:!0,source:{uri:(null==p||null==(t=p[0])?void 0:t.photoURL)||"https://cencup.com/wp-content/uploads/2019/07/avatar-placeholder.png"}}),o.a.createElement(m.f.Content,null,o.a.createElement(m.f.Title,{style:{fontWeight:"bold"}},c),o.a.createElement(m.f.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==p||null==(a=p[0])?void 0:a.displayName,": ",null==p||null==(n=p[0])?void 0:n.message)))},O=(i.a.create({}),function(e){var t=e.navigation,a=Object(r.useState)([]),n=s()(a,2),i=n[0],c=n[1],l=function(){p.signOut().then((function(){t.replace("Login")}))};Object(r.useEffect)((function(){return h.collection("chats").onSnapshot((function(e){c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerStyle:{backgroundColor:"#fff"},headerTitleStyle:{color:"black"},headerTintColor:"black",headerLeft:function(){var e;return o.a.createElement(u.a,{style:{marginLeft:20}},o.a.createElement(C.a,{activeOpacity:.5,onPress:l},o.a.createElement(m.a,{rounded:!0,source:{uri:null==p||null==(e=p.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(C.a,{activeOpacity:.5},o.a.createElement(w.a,{name:"camerao",size:24,color:"black"})),o.a.createElement(C.a,{onPress:function(){return t.navigate("AddChat")},activeOpacity:.5},o.a.createElement(S.a,{name:"pencil",size:24,color:"black"})))}})}),[t]);var d=function(e,a){t.navigate("Chat",{id:e,chatName:a})};return o.a.createElement(b.a,null,o.a.createElement(v.a,null,i.map((function(e){var t=e.id,a=e.data.chatName;return o.a.createElement(x,{key:t,id:t,chatName:a,enterChat:d})}))))}),k=(i.a.create({container:{height:"100%"}}),a(19)),T=a.n(k),j=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),i=n[0],c=n[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Add a new Chat",headerBackTitle:"Chats"})}),[t]);var l=function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.awrap(h.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)};return o.a.createElement(u.a,{style:L.container},o.a.createElement(m.e,{placeholder:"Enter a chat name",value:i,onChangeText:function(e){return c(e)},onSubmitEditing:l,leftIcon:o.a.createElement(m.c,{name:"wechat",type:"antdesign",size:24,color:"black"})}),o.a.createElement(m.b,{disabled:!i,onPress:l,title:"Create new Chat"}))},L=i.a.create({container:{backgroundColor:"white",padding:30,height:"100%"}}),R=a(67),P=a(26),B=a(218),N=a(209),z=a(103),I=a(51),U=a(8),A=a(60),D=function(e){var t=e.navigation,a=e.route,i=Object(r.useState)(""),c=s()(i,2),l=c[0],g=c[1],f=Object(r.useState)([]),E=s()(f,2),y=E[0],S=E[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return o.a.createElement(u.a,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(m.a,{rounded:!0,source:{uri:null==(e=y[0])?void 0:e.data.photoURL}}),o.a.createElement(P.a,{style:{color:"white",marginLeft:10,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return o.a.createElement(C.a,{style:{marginLeft:10},onPress:t.goBack},o.a.createElement(w.a,{name:"arrowleft",size:24,color:"white"}))},headerRight:function(){return o.a.createElement(u.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(C.a,null,o.a.createElement(B.a,{name:"video-camera",size:24,color:"white"})),o.a.createElement(C.a,null,o.a.createElement(N.a,{name:"call",size:24,color:"white"})))}})}),[t,y]);var x=function(){A.a.dismiss(),h.collection("chats").doc(a.params.id).collection("messages").add({timestamp:d.firestore.FieldValue.serverTimestamp(),message:l,displayName:p.currentUser.displayName,email:p.currentUser.email,photoURL:p.currentUser.photoURL}),g("")};return Object(r.useLayoutEffect)((function(){return h.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return S(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),o.a.createElement(b.a,{style:{flex:1,backgroundColor:"white"}},o.a.createElement(n.a,{style:"light"}),o.a.createElement(z.a,{behavior:"android"===U.a.OS?"padding":"height",style:W.container,keyboardVerticalOffset:90},o.a.createElement(R.a,{onPress:A.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{contentContainerStyle:{paddingTop:15}},y.map((function(e){var t=e.id,a=e.data;return a.email===p.currentUser.email?o.a.createElement(u.a,{key:t,style:W.reciever},o.a.createElement(m.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(P.a,{style:W.recieverText},a.message)):o.a.createElement(u.a,{key:t,style:W.sender},o.a.createElement(m.a,{position:"absolute",rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},bottom:-15,right:-5,size:30,source:{uri:a.photoURL}}),o.a.createElement(P.a,{style:W.senderText},a.message),o.a.createElement(P.a,{style:W.senderName},a.displayName))}))),o.a.createElement(u.a,{style:W.footer},o.a.createElement(I.a,{value:l,onChangeText:function(e){return g(e)},onSubmitEditing:x,placeholder:"Signal Message",style:W.textInput}),o.a.createElement(C.a,{onPress:x,activeOpacity:.5},o.a.createElement(N.a,{name:"send",size:24,color:"#2B68E6"})))))))},W=i.a.create({container:{flex:1},reciever:{padding:15,backgroundColor:"#ECECEC",alignSelf:"flex-end",borderRadius:20,marginRight:15,marginBottom:20,maxWidth:"80%",position:"relative"},sender:{padding:15,backgroundColor:"#2B68E6",alignSelf:"flex-start",borderRadius:20,margin:15,maxWidth:"80%",position:"relative"},senderText:{color:"white",fontWeight:"500",marginLeft:10,marginBottom:15},recieverText:{color:"black",fontWeight:"500",marginLeft:10},senderName:{left:10,paddingRight:10,fontSize:10,color:"white"},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},textInput:{bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",backgroundColor:"#ECECEC",borderWidth:1,padding:10,color:"grey",borderRadius:30}}),F=a(340),J=Object(F.a)(),Q={headerStyle:{backgroundColor:"#2C6BED"},headerTitleStyle:{color:"white"},headerTintColor:"white"};function V(){return o.a.createElement(c.a,null,o.a.createElement(J.Navigator,{screenOptions:Q},o.a.createElement(J.Screen,{name:"Login",component:g}),o.a.createElement(J.Screen,{name:"Register",component:E}),o.a.createElement(J.Screen,{name:"Home",component:O}),o.a.createElement(J.Screen,{name:"AddChat",component:j}),o.a.createElement(J.Screen,{name:"Chat",component:D})))}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},248:function(e,t,a){e.exports=a(326)}},[[248,1,2]]]);
//# sourceMappingURL=app.7b73d0db.chunk.js.map